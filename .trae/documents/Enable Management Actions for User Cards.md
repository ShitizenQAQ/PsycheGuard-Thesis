## 原因与现状
- 用户卡片右上角的 `MoreHorizontal` 图标只是一个图标按钮，没有任何点击逻辑或菜单，无法触发管理操作。
- 只有两个操作按钮可用：`查看档案` 与 `发起测评`；编辑、归档、删除等“管理”功能未实现。
- 路由守卫限制 `PRISONER` 角色访问 `/users`，如非医生登录将无法进行人员管理。

## 目标
- 在人员卡片上提供完整管理菜单（编辑、归档/取消归档、删除、发起测评、查看档案）。
- 仅医生可见并可操作，确保权限正确。
- 完成“编辑保存”逻辑，并刷新列表显示（含已归档徽章切换）。

## 具体改动
### 管理菜单（UI）
- 在 `src/views/UserManagement.vue` 将右上角图标替换为 `ElDropdown` 菜单：
  - 菜单项：`编辑信息`、`归档/取消归档`、`删除`、`发起测评`、`查看档案`。
  - 仅当 `isDoctor` 为 true 时显示该菜单；普通用户不显示。

### 权限控制
- 新增 `isDoctor` 计算属性（来源 `localStorage.user_role` 或用户 store）。
- 根据 `isDoctor` 控制菜单显示与按钮启用状态。

### 编辑保存
- 新增方法 `openEdit(u)`：打开已有的“编辑人员信息”弹窗并填充 `editForm`。
- 新增方法 `saveEdit()`：
  - 若后端支持，执行 `PUT /api/users/{id}` 更新；
  - 若暂不支持，更新前端 `ALL_USERS` 中对应项，并提示成功；
  - 保存后重新拉取 `/api/users` 刷新列表，保持数据一致。

### 归档切换
- 新增方法 `toggleArchive(u)`：切换 `u.archived` 本地状态（或调用后端 `POST /api/users/{id}/archive`）。
- 刷新卡片徽章显示：归档显示“已归档”，否则“待评估”。

### 删除
- 新增方法 `deleteUser(u)`：
  - 显示二次确认弹窗；
  - 若后端支持，调用 `DELETE /api/users/{id}`；否则在前端列表删除；
  - 操作后重新拉取 `/api/users`。

### 现有操作复用
- 菜单中的 `发起测评` 调用已存在的 `startTest(u)`（已实现携带 query 参数）。
- 菜单中的 `查看档案` 调用已存在的 `viewProfile(u)`。

## 验证流程
- 以医生身份登录访问 `/users`。
- 点击卡片右上角菜单：
  - 选择“编辑信息”并保存 → 列表刷新，信息更新。
  - 切换“归档/取消归档” → 徽章在“待评估/已归档”之间正确切换。
  - “发起测评”跳转 `/test?targetId=...&targetName=...`，评估完成后返回 `/users` 显示“已归档”。
  - 删除后列表移除该人员并刷新。

## 兼容性与安全
- 保持所有颜色与样式使用既有库（Element Plus）与 Tailwind 类，不引入不支持的 CSS 功能。
- 不记录或显示敏感信息；所有交互前有确认对话框。

## 交付
- 完成菜单与方法实现、权限控制、编辑保存、归档切换、删除逻辑。
- 回归测试上述管理操作与路由守卫逻辑。